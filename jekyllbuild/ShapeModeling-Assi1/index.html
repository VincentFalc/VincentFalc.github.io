<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
<title>Vincent F. - Shape Modeling IGL Library </title>

<meta content='width=device-width, initial-scale=1, maximum-scale=1' name='viewport'/>
<link href='http://fonts.googleapis.com/css?family=Source+Code+Pro:500,600' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="/css/main.css">
<link rel="stylesheet" id="color-change" href="">
<link rel="stylesheet" id="switch-style" href="/css/grid.css">
<link rel="alternate" type="application/rss+xml" title="Vincent F." href="http:/localhost:4000/feed.xml">

    </head>

    <body>
        <header class="head">
            <div class="row">
    <a href="/" class="logo noline">
        <!-- full logo version with slogan, icon and text, add the class .ts-full if you want to work with some of the existing CSS -->
   <svg version="1.1" viewBox="0 0 850.61096 179.54858" class="ts-full">
    <g transform="translate(-49.00717,-350.11674)">
        <g transform="matrix(0.65068572,0,0,0.65068572,11.104727,118.00494)" class="icon">
            <path d="m 101.39622,391.43518 191.99569,0 c 5.04555,0 9.10749,46.87698 9.10749,105.10533 0,58.22836 -4.06194,105.10533 -9.10749,105.10533 l -191.99569,0 c -5.045545,0 -9.107486,-46.87697 -9.107486,-105.10533 0,-58.22835 4.061941,-105.10533 9.107486,-105.10533 z" class="rectangle" />
            <path d="m 165.8125,358.21875 -5.1875,99.21875 -100.875,0 0,7.625 100.46875,0 -3.28125,62.59375 -97.1875,0 0,7.59375 96.78125,0 -5,95.5 7.625,0.40625 5.03125,-95.90625 62.5625,0 -5,95.5 7.59375,0.40625 5.03125,-95.90625 98.28125,0 0,-7.59375 -97.875,0 3.28125,-62.59375 94.59375,0 0,-7.625 -94.1875,0 5.15625,-98.84375 -7.59375,-0.375 -5.1875,99.21875 -62.5625,0 5.15625,-98.84375 -7.625,-0.375 z m 2.0625,106.84375 62.5625,0 -3.28125,62.59375 -62.5625,0 3.28125,-62.59375 z" class="lines" />
        </g>
        <text x="235.15662" y="477.12143" class="gridster">
            <tspan x="235.15662" y="477.12143">VFProjects</tspan>
        </text>
        <text x="304.80173" y="512.31683" class="slogan">
            <tspan x="304.80173" y="512.31683">Personal and professional work</tspan>
        </text>
    </g>
</svg>
        <!-- logo version without slogan, add the class .ts-no-slogan if you want to work with some of the existing CSS -->
<svg version="1.1" viewBox="0 0 677.61096 179.54858" class="ts-no-slogan">
    <g transform="translate(-49.00717,-350.11674)">
        <g transform="matrix(0.65068572,0,0,0.65068572,11.104727,118.00494)" class="icon">
            <path d="m 101.39622,391.43518 191.99569,0 c 5.04555,0 9.10749,46.87698 9.10749,105.10533 0,58.22836 -4.06194,105.10533 -9.10749,105.10533 l -191.99569,0 c -5.045545,0 -9.107486,-46.87697 -9.107486,-105.10533 0,-58.22835 4.061941,-105.10533 9.107486,-105.10533 z" class="rectangle" />
            <path d="m 165.8125,358.21875 -5.1875,99.21875 -100.875,0 0,7.625 100.46875,0 -3.28125,62.59375 -97.1875,0 0,7.59375 96.78125,0 -5,95.5 7.625,0.40625 5.03125,-95.90625 62.5625,0 -5,95.5 7.59375,0.40625 5.03125,-95.90625 98.28125,0 0,-7.59375 -97.875,0 3.28125,-62.59375 94.59375,0 0,-7.625 -94.1875,0 5.15625,-98.84375 -7.59375,-0.375 -5.1875,99.21875 -62.5625,0 5.15625,-98.84375 -7.625,-0.375 z m 2.0625,106.84375 62.5625,0 -3.28125,62.59375 -62.5625,0 3.28125,-62.59375 z" class="lines" />
        </g>
        <text x="235.15662" y="477.12143" class="gridster">
            <tspan x="235.15662" y="477.12143">Projects</tspan>
        </text>
    </g>
</svg>
        <!-- icon logo version, add the class .ts-icon if you want to work with some of the existing CSS -->
<svg version="1.1" viewBox="0 0 179.52826 179.54858" class="ts-icon">
    <g transform="translate(-49.00717,-350.11674)">
        <g transform="matrix(0.65068572,0,0,0.65068572,11.104727,118.00494)" class="icon">
            <path d="m 101.39622,391.43518 191.99569,0 c 5.04555,0 9.10749,46.87698 9.10749,105.10533 0,58.22836 -4.06194,105.10533 -9.10749,105.10533 l -191.99569,0 c -5.045545,0 -9.107486,-46.87697 -9.107486,-105.10533 0,-58.22835 4.061941,-105.10533 9.107486,-105.10533 z" class="rectangle" />
            <path d="m 165.8125,358.21875 -5.1875,99.21875 -100.875,0 0,7.625 100.46875,0 -3.28125,62.59375 -97.1875,0 0,7.59375 96.78125,0 -5,95.5 7.625,0.40625 5.03125,-95.90625 62.5625,0 -5,95.5 7.59375,0.40625 5.03125,-95.90625 98.28125,0 0,-7.59375 -97.875,0 3.28125,-62.59375 94.59375,0 0,-7.625 -94.1875,0 5.15625,-98.84375 -7.59375,-0.375 -5.1875,99.21875 -62.5625,0 5.15625,-98.84375 -7.625,-0.375 z m 2.0625,106.84375 62.5625,0 -3.28125,62.59375 -62.5625,0 3.28125,-62.59375 z" class="lines" />
        </g>
    </g>
</svg>
    </a>
</div>

            <!-- menu, we did go with a static one, you can build a dynamic one, just google a little around -->
<div class="main-menu">
    <div class="content">
        <nav id="menu">
            <a class="toggle-link noline"><i class="fa fa-close fa-lg"></i></a>
            <ul>
                <li>
                    <a class="homelink" href="/">Home</a>
                </li>
                <li>
                    <a href="/archive">Archive</a>
                </li>
                <!--
                <li>
                    <a href="/typography">Typography</a>
                </li>
                <li><a class="dropdown-button" href="#" data-activates='drop-example'>Page Layouts&nbsp;&nbsp;<i class="fa fa-caret-down"></i></a>
                </li>
                <div id="drop-example" class="dropdown-content">
                    <li>
                        <a href="/page-full">page-full</a>
                    </li>
                    <li>
                        <a href="/page-classic-sidebar-right">page classic sidebar right</a>
                    </li>
                    <li>
                        <a href="/page-classic-sidebar-left">page classic sidebar left</a>
                    </li>
                    <li>
                        <a href="/page-material-sidebar-right">page material sidebar right</a>
                    </li>
                    <li>
                        <a href="/page-material-sidebar-left">page material sidebar left</a>
                    </li>
                </div>
                <li>
                    <a href="#colorswitch" class="modal-trigger">Change Colors <i class="fa fa-cog"></i></a>
                </li>
                -->
            </ul>
        </nav>
        <nav class="iconnav">
            <ul>
                <li class="sicon">
                    <a href='#search'><i class='fa fa-search'></i></a>
                </li>
                <!--
                
                <li class="social">
                    <a href="" class="tumblr"><i class="fa fa-tumblr"></i></a>
                </li>
                 
                <li class="social">
                    <a href="" class="pinterest"><i class="fa fa-pinterest"></i></a>
                </li>
                 
                <li class="social">
                    <a href="" class="instagram"><i class="fa fa-instagram"></i></a>
                </li>
                 
                <li class="social">
                    <a href="" class="twitter"><i class="fa fa-twitter"></i></a>
                </li>
                 
                <li class="social">
                    <a href="" class="facebook"><i class="fa fa-facebook"></i></a>
                </li>
                 
                <li class="social">
                    <a href="" class="youtube"><i class="fa fa-youtube"></i></a>
                </li>
                 
                <li class="social">
                    <a href="" class="vimeo"><i class="fa fa-vimeo-square"></i></a>
                </li>
                 
                <li class="social">
                    <a href="" class="soundcloud"><i class="fa fa-soundcloud"></i></a>
                </li>
                
                -->
            </ul>
        </nav>
        <a href='#menu' class="toggle-link noline">
            <i class="fa fa-navicon"></i>
        </a>
    </div>
</div>




<div id="colorswitch" class="modal color-change">
    <div class="modal-content">
      <h4>Change Color Palette</h4>
      <p>
      <img id="indigo" alt="color palette preview indigo" src="/media/compressed/indigo.jpg">
      <img id="brown" alt="color palette preview brown" src="/media/compressed/brown.jpg">
      <img id="green" alt="color palette preview green" src="/media/compressed/green.jpg">
      <img id="teal" alt="color palette preview teal" src="/media/compressed/teal.jpg">
      </p>
    </div>
    <div class="modal-footer">
      <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat">close</a>
    </div>
  </div>
        </header>
        <div id="search">
    <form role="search" id="searchform">
        <input type="search" placeholder="Search"/>
    </form>
</div>

        <div class="margin">
            <div class="content full">
                <div class="content-container">
                    <article>
                        
                            
                                <img class="featimg" src="/media/compressed/HardExtrusionCoffee.gif" alt="HardExtrusionCoffee.gif">
                            
                        

                        <h1 class="post-title">
                            Shape Modeling IGL Library
                        </h1>
                        <div class="meta">
                            

    <span class="author">Posted by
        
        
            <a href="/author/VF">
                
                    Vincent F.
                
            </a>
        
    </span>

 &bull;
                            <span class="date">
                                Published on March 05, 2018
                            </span>
                        </div>
                        
                        <div class="post-content">
                            <h5 id="tldr">TL;DR</h5>
<p>This project was linked to a lecture about Shape Modeling. This project presents primitives to manipulate data with the IGL and Eigen libraries.
These librairies are not well documented and therefore understand the implementation of some trivial operations might be time-consuming. This project try to show some basics with the library. It leads to a very basic blender-like real-time mesh editor.
<br /></p>

<h5 id="table-of-contents">Table of Contents</h5>
<p><a href="#Neighboorhood">1. Neighboorhood computations</a>  <br />
<a href="#Vertex2Face">1.1. Vertex To Face relations</a>  <br />
<a href="#Vertex2Vertex">1.2. Vertex To Vertex relations</a>  <br />
<a href="#Connected">2. Connected components</a>  <br />
<a href="#subdivision">3. A simple subdivision scheme</a>  <br />
<a href="#extrusion">4. Mesh extrude</a>  <br />
<a href="#designMaster">5. My wonderful design</a>  <br /></p>

<p><br /></p>

<p><a name="Neighboorhood"></a></p>

<h4 id="1-neighboorhood-computations">1. Neighboorhood computations</h4>

<p><a name="Vertex2Face"></a></p>

<h4 id="11-vertex-to-face-relations">1.1 Vertex To Face relations</h4>

<p>V is the matrix representing the vertices of the mesh
F is the matrix representing the triangular faces of the mesh, as references to V.</p>

<p>As a first step, we can represent the relation between vertices and faces as an adjacency list.
By pressing ‘1’ we get a text output of the vertex-to-face relation</p>

<h6 id="documentation-informations">Documentation informations</h6>

<p>Information about function of IGL Library can be found directly in the header files of the git repository.</p>

<p>We can use the following function :</p>
<ul>
  <li><strong>igl::vertex_triangle_adjacency()</strong>
This function construct the vertx-face topology of a mesh defined by (V,F) (described below). <br />
Informations about the function : <a href="https://github.com/libigl/libigl/blob/master/include/igl/vertex_triangle_adjacency.h">-&gt; Documentation</a></li>
</ul>

<p>An over-view on how to use this function is following.</p>

<p><strong>Inputs</strong> :</p>
<ul>
  <li>(Implicit :  V = a 3-list that represent vertex coordinates)</li>
  <li>n = number of vertices of V (here, <code class="highlighter-rouge">V.rows()</code>)</li>
  <li>F = a 3-list that represent mesh faces (has to be triangles)</li>
</ul>

<p><strong>Outputs</strong> :</p>
<ul>
  <li>VF = An adjacency list of incident faces</li>
  <li>VI = An adjacency list of index of incidence (related by index to VF adajcency list)</li>
</ul>

<h6 id="usage">Usage</h6>
<p>We want, for each vertex, the adjacent faces. We call the function that build the adjacent list and print the VF list.</p>

<pre><code class="language-C++">igl::vertex_triangle_adjacency(V.rows(), F,VF,VFi);
</code></pre>

<h6 id="result">Result</h6>
<div style="text-align:center">
<p align="center">
  <img style="height : 600px;" src="/media/compressed/capture1_1.png" />
</p>
</div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cube.off
Vertex ID	 Faces associated
0		0 1 4 5 10 
1		0 5 6 7 
2		0 1 7 8 9 
3		1 9 10 11 
4		2 3 4 10 11 
5		3 4 5 6 
6		2 3 6 7 8 
7		2 8 9 11 
</code></pre></div></div>

<hr />

<p><a name="Vertex2Vertex"></a></p>

<h4 id="12-vertex-to-vertex-relations">1.2. Vertex To Vertex relations</h4>

<p>As a second step, we can represent the relation between vertices as an adjacency list, as we did between vertices and faces.
By pressing ‘2’ we get a text output of the vertex-to-vertex relation</p>

<h6 id="documentation-informations-1">Documentation informations</h6>

<p>We can use the following function :</p>
<ul>
  <li><strong>igl::adjacency list</strong></li>
</ul>

<p>This function construct the graph adjacency list of a mesh defined by (V,F). <br /> Informations about the function : 
<a href="https://github.com/libigl/libigl/blob/master/include/igl/adjacency_list.h">-&gt; Documentation</a></p>

<p><strong>Inputs</strong> :</p>
<ul>
  <li>F = a 3-list that represent mesh faces (has to be triangles)</li>
</ul>

<p><strong>Outputs</strong> :</p>
<ul>
  <li>A = An adjacency list of incident vertices</li>
</ul>

<h6 id="usage-1">Usage</h6>
<p>We want, for each vertex, the adjacent vertices. We call the function that build the adjacent list and print the VV list.</p>
<pre><code class="language-C++">igl::adjacency_list(F,VV);
</code></pre>

<h6 id="result-1">Result</h6>
<div style="text-align:center">
<p align="center">
  <img style="height : 600px;" src="/media/compressed/capture2_1.png" />
</p>
</div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cube.off
Vertex ID	 Vertices associated
0		1 2 3 4 5 
1		0 2 5 6 
2		0 1 3 6 7 
3		0 2 4 7 
4		0 3 5 6 7 
5		0 1 4 6 
6		1 2 4 5 7 
7		2 3 4 6 
</code></pre></div></div>

<hr />

<p><a name="Connected"></a></p>

<h3 id="21-connected-components">2.1 Connected components</h3>

<p>A mesh can be divided in independants smaller meshes, not connected, that we call separated connected components. Each mesh face only belongs to a single component. We can color differently each component.</p>

<p>By pressing ‘3’ we get a text output of the connected components list.</p>

<h6 id="documentation-informations-2">Documentation informations</h6>

<p>We can use the following function :</p>
<ul>
  <li><strong>igl::facet components()</strong>
This function compute a list of the connected components, based on adjacency of edges.<br />
<a href="https://github.com/libigl/libigl/blob/master/include/igl/facet_components.h">-&gt; Documentation</a></li>
  <li><strong>igl::jet()</strong>
This function compute a list colors [r,g,b] from a list of factor [0-1]. <br />
<a href="https://github.com/libigl/libigl/blob/master/include/igl/jet.h">-&gt; Documentation</a></li>
</ul>

<p>For <strong>igl::facet components()</strong> we have :</p>

<p><strong>Inputs</strong> :</p>
<ul>
  <li>F = a 3-list that represent mesh faces (has to be triangles)</li>
</ul>

<p><strong>Outputs</strong> :</p>
<ul>
  <li>C = A list of connected component ids</li>
  <li>(overload : Cnb = A list of number of facets in each components )</li>
</ul>

<p>For <strong>igl::jet()</strong> we have :</p>

<p><strong>Inputs</strong> :</p>
<ul>
  <li>Z  = list of factors</li>
  <li>const bool normalize = jet normalize Z to fit into [0-1]</li>
</ul>

<p><strong>Outputs</strong> :</p>
<ul>
  <li>C = A 3-list of colors as [r,g,b]</li>
</ul>

<h6 id="usage-2">Usage</h6>
<p>We compute each component by a call to IGL library. Then we compute a color for each component. Then we extract the number of component. Then we calcul the number of faces for each component.</p>
<pre><code class="language-C++">igl::facet_components(F,cid);
igl::jet(cid,true,colors_per_face);

//Calcul of nb of faces per component
long long nbOfFacesPerComp[max];
for(int i =0 ; i&lt;=max ; i++){
  nbOfFacesPerComp[i]=0;
}
for(int i =0 ; i&lt;cid.size() ; i++){
  nbOfFacesPerComp[cid[i]]++;
}

(...)
</code></pre>

<h6 id="result-2">Result</h6>
<div style="text-align:center">
<p align="center">
  <img style="height : 300px;" src="/media/compressed/cube_1.png" />
  <img style="height : 300px;" src="/media/compressed/coffe_1.png" />
  <img style="height : 300px;" src="/media/compressed/honda_1.png" />
</p>
</div>

<div style="text-align:center">
<p align="center">
  <img style="width : 300px;" src="/media/compressed/cube_2.png" />
  <img style="width : 300px;" src="/media/compressed/coffe_2.png" />
  <img style="width : 300px;" src="/media/compressed/honda_2.png" /></p>
</div>

<hr />

<p><a name="subdivision"></a></p>

<h3 id="3-a-simple-subdivision-scheme">3. A simple subdivision scheme</h3>

<p>We can implement a subdivision scheme to iteratively create a denser grid of triangle representing the same mesh. The subdivision scheme used is described there : 
<a href="https://www.graphics.rwth-aachen.de/media/papers/sqrt31.pdf">-&gt; Description</a></p>

<p align="center">
<img style="height : 400px;" src="/media/compressed/subdivision.png" /><br />
Extracted from the cited paper - RWTH Aachen
</p>

<p>This operation shrink and smooth the mesh during the process.</p>

<h6 id="documentation-informations-3">Documentation informations</h6>

<p>We can use the following function :</p>
<ul>
  <li><strong>igl::adjacency list</strong>
Give adjacent vertices.<br />
<a href="https://github.com/libigl/libigl/blob/master/include/igl/adjacency_list.h">-&gt; Documentation</a></li>
  <li><strong>igl::triangle triangle adjacency</strong>
Give a list for topological adjacency of triangles.<br />
<a href="https://github.com/libigl/libigl/blob/master/include/igl/triangle_triangle_adjacency.h">-&gt; Documentation</a></li>
  <li><strong>igl::edge topology</strong>
Give topological relations of edges .<br />
<a href="https://github.com/libigl/libigl/blob/master/include/igl/edge_topology.h">-&gt; Documentation</a></li>
  <li><strong>igl::barycenter</strong>
Computes the barycenter of every simplex.<br />
<a href="https://github.com/libigl/libigl/blob/master/include/igl/barycenter.h">-&gt; Documentation</a></li>
  <li><strong>igl::viewer.data.clear()</strong>
Clean the data displayed on the screen<br /></li>
</ul>

<h6 id="usage-3">Usage</h6>
<p>We create new vertices, we create new faces, we put these new data in the final V,F.
(Only essentials parts are displayed, such code doesn’t compile)</p>

<pre><code class="language-C++">    // CREATION OF NEW VERTICES (BARYCENTERS)
    igl::barycenter(V,F,BC);

    // CREATION OF NEW POSITIONS OF OLD VERTICES
    igl::adjacency_list(Fout, A, true);

    //Calculate for each old vertex, his new coordinates
    for(int i=0; i&lt;A.size(); i++){

        //calculate n &amp; An
        int n = A[i].size();
        double an = (4-2*(std::cos((2*pi)/n)))/9;
       
        //calculate Sum of coord neighboor (matrix style)
        for(int j = 0 ; j&lt; n ; j++){
          VTMP.row(0) = VTMP.row(0) + Vout.row(A[i][j]); //sum
        }

        //Calculate new coordinate (matrix style) = Final calculus
        VTMP.row(0) = (1-an)*Vout.row(i) + (an/n)*VTMP.row(0);

        //Replace in the new Vertice list
        Vout.row(i) = VTMP.row(0);
    }

    // CONCATENATE RESULT TO HAVE FINAL VERTICES LIST
  ...

    //** CREATION OF THE NEWS FACES */
    igl::triangle_triangle_adjacency(F,TT,TTi);
    
    long nbOfNewFaces = 0 ;
    Fout.conservativeResize(3*F.rows(), Eigen::NoChange);

    for(int i = 0 ; i&lt;F.rows(); i++){
        for(int j = 0 ; j&lt;3 ; j ++){
            //In ordier : current vertex, newVertexOfTheFace, newVertexOfAdjacentFace
            Fout.row(nbOfNewFaces) &lt;&lt; F.row(i)[j], oldSizeV+TT.row(i)[j], oldSizeV+i;
            nbOfNewFaces++;
        }
    }

    Fout.conservativeResize(nbOfNewFaces, Eigen::NoChange);
    
    V = Vout; 
    F = Fout;

    update_display(viewer);
    }
    
</code></pre>

<h6 id="result-3">Result</h6>
<div style="text-align:center">
<p align="center">
  <img style="height : 500px;" src="/media/compressed/CubeSpeed.gif" />
  <img style="height : 500px;" src="/media/compressed/CoffeSpeed.gif" />
  <img style="height : 500px;" src="/media/compressed/hondaSpeed.gif" />
</p>
</div>

<hr />

<p><a name="extrusion"></a></p>

<h3 id="4-mesh-extrude">4. Mesh extrude</h3>

<p>A basic mesh editing operation are implemented : selecting faces, translating faces, … Here is the code concerning the extrusion.</p>

<h6 id="documentation-informations-4">Documentation informations</h6>

<p>We can use the following function :</p>
<ul>
  <li><strong>igl::vertex triangle adjacency</strong>
Constructs the vertex-face topology of a given mesh<br />
<a href="https://github.com/libigl/libigl/blob/master/include/igl/vertex_triangle_adjacency.h">-&gt; Documentation</a></li>
  <li><strong>igl::is edge manifold</strong>
Return if mesh is edge manifold<br />
<a href="https://github.com/libigl/libigl/blob/master/include/igl/is_edge_manifold.h">-&gt; Documentation</a></li>
  <li><strong>igl::is vertex manifold</strong>
Checks whether the faces incident on each vertex form exactly one connected component.<br />
<a href="https://github.com/libigl/libigl/blob/master/include/igl/is_vertex_manifold.h">-&gt; Documentation</a></li>
</ul>

<p>std::set, std::set difference are part of the STL lib.<br /></p>

<h6 id="usage-4">Usage</h6>

<p>We select a set of faces, and we want to extrude the mesh from these faces.</p>

<p>We get a list of the faces having at least on vertice of the set of faces we want to extrude. 
We update these vertices, as new faces are created during the process to make a link between the “old boundary” (vertices which didn’t move) and the “new boundary” (vertices newly created, which will be moved). 
We then create the new faces generated due to the extrusion, that we link in a consistent way between the old and new vertices.
(Only essentials parts are displayed, such code doesn’t compile)</p>

<pre><code class="language-C++">    // 5) Update Fout 
    ...

    // 5.1) Get the set of faces containing the old boundary vertices 
    igl::vertex_triangle_adjacency(V.rows(),F,VF,VI);

    // 5.2) Get the "outer" set of faces containing the boundary vertices 
    for(int i=0 ; i&lt;bnd_loop.size(); i++){
        //Add this list of faces to the global set
        allAdjacentFacesOfBoundaries.insert(VF.at(bnd_loop.at(i)).begin(), VF.at(bnd_loop.at(i)).end());
    }

    ...
    std::set_difference(allAdjacentFacesOfBoundaries.begin(), allAdjacentFacesOfBoundaries.end(), selected_faces.begin(), selected_faces.end(),std::inserter(diff, diff.begin()));

    // 5.3) Edit old outer faces indices, replacing the old vertices with the indices of the duplicated boundary vertices
    for(int i=0 ; i &lt; Fout.rows() ; i++){

        //For each colums of F
        for(int j = 0 ; j &lt;3 ; j++){
            it = find (bnd_loop.begin(), bnd_loop.end(), Fout.row(i)[j]);

            //Changement : Only if we have found that the current value of Fout (in one column) is in the boundary
            if (it != bnd_loop.end()){
                int posInTheBoundaryList = std::distance(bnd_loop.begin(), it);
                isToChange = find (diff.begin(), diff.end(), i);

                //and the current Face number is not part of the selected area
                if (isToChange != diff.end()){  
                    //We change the value, with the new one : 
                    Fout.row(i)[j] = posInTheBoundaryList + V.rows();//where it is in the boundary list + offset due to non-changed initial vertices of V
                }
              }
        }
    }


    // 5.4) Add new faces, 2 per edge
    int f_idx = F.rows();

    for (int i = 0; i &lt; bnd_loop.size(); i++) {
        int v1 = bnd_loop.at(i);
        int v2 = bnd_loop.at((i+1)%(bnd_loop.size()));
        int v3 = V.rows()+i;
        int v4 = V.rows()+ ((i+1)%(bnd_loop.size()));

        // set v1,v2,v3,v4 correctly
        Fout.row(f_idx++) &lt;&lt; v3,v2,v1;
        Fout.row(f_idx++) &lt;&lt; v2,v3,v4;
    }

    // 6) Check that the new mesh is a manifold (call is_edge_manifold, is_vertex_manifold on Vout,Fout)
    bool isEdgeManifold = igl::is_edge_manifold(Fout);
    bool isVertexManifold = igl::is_vertex_manifold(Fout,Vide);

    std::cout&lt;&lt; "isEdgeManifold :" &lt;&lt; isEdgeManifold &lt;&lt; endl;
    std::cout&lt;&lt; "isVertexManifold :" &lt;&lt; isVertexManifold &lt;&lt; endl;

    // 7) Update V,F
    V = Vout;
    F = Fout;
  ...
    
</code></pre>

<h6 id="result-4">Result</h6>
<div style="text-align:center">
<p align="center">
  <img style="width : 600px;" src="/media/compressed/EasyExtrusionCoffe.gif" />
  <img style="width : 600px;" src="/media/compressed/EasyExtrusionCube.gif" />
</p>
</div>
<div style="text-align:center">
<p align="center">
  <img style="width : 600px;" src="/media/compressed/HardExtrusionCoffee.gif" />
  <img style="width : 600px;" src="/media/compressed/HardExtrusionCube.gif" />
</p>
</div>
<div style="text-align:center">
<p align="center">
  <img style="width : 600px;" src="/media/compressed/HondaExtrusion.gif" />
</p>
</div>

<p>For more information, see : 
<a href="https://github.com/VincentFalc/ShapeModeling_1_BasicIGL">-&gt; Repository</a></p>

<p>Note that the code is not optimized by thoughtful laziness: this code is not made to be reused as is in other applications, and if this is the case, the code will be reviewed and optimized. Thanks for your understanding.</p>

                        </div>
                        
                        <div class="catsandtags">
                            
                            <span class="category">
                                <span class="name">categories:</span>
                                Shape Modeling
                            </span>
                            
                            
                                &bull;
                            
                            
                            <span class="tags">
                                <span class="name">tags:</span>
                                
                                    <a href="/tag/Shape Modeling">Shape Modeling</a>
                                
                                    <a href="/tag/IGL">IGL</a>
                                
                                    <a href="/tag/Eigen">Eigen</a>
                                
                                    <a href="/tag/Subdivision">Subdivision</a>
                                
                                    <a href="/tag/Extrusion">Extrusion</a>
                                
                                    <a href="/tag/Basic computation">Basic computation</a>
                                
                            </span>
                            
                        </div>
                        
                    </article>
                    <div class="post-nav">
                        
                        
                        <a class="btn next" href="/ShapeModeling-Assi2/"><span class="short">next </span><span class="long">post </span><i class="fa fa-angle-right"></i></a>
                        
                    </div>
                </div>
            </div>
        </div>
        <footer>
    <div class="content">
        <span>Vincent F. powered by &copy; gridster</span>
        <span class="backtotop">Back to top</span>
    </div>
</footer>
<script src="/js/build/global.min.js"></script>
<!-- analytics -->
<script>

  ga('create', 'UA-50358022-5', 'auto');
  ga('send', 'pageview');

</script>
        
    </body>
</html>
